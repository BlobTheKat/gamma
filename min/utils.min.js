{Object.defineProperties(Array.prototype,{best:{enumerable:!1,value(t,i=-1/0){let s;const e=this.length;for(let h=0;h<e;h++){const e=this[h],r=t(e,h,this);r>=i&&(i=r,s=e)}return s}},mmap:{enumerable:!1,value(t){const i=this.length;for(let s=0;s<i;s++)this[s]=t(this[s]);return this}},bind:{enumerable:!1,value(t,i=-1){if((i>>>=0)>=this.length)return this.push(t);let s;for(;i<this.length;)s=this[i],this[i++]=t,t=s;return this.push(s)}},fire:{enumerable:!1,value(...t){for(const i of this)try{i(...t)}catch(t){Promise.reject(t)}}},mapFire:{enumerable:!1,value(...t){const i=[];for(const s of this)try{i.push(s(...t))}catch(t){Promise.reject(t),i.push(void 0)}return i}}}),Uint8Array.fromHex=function(t){const i=new Uint8Array(t.length>>>1);let s=1,e=0;for(let h=0;h<t.length;h++){const r=t.charCodeAt(h);r>47&&r<58?s=s<<4|r-48:r>64&&r<71?s=s<<4|r-55:r>96&&r<103&&(s=s<<4|r-87),256&s&&(i[e++]=s,s=1)}return i.slice(0,e)},Uint16Array.fromHex=function(t){const i=new Uint16Array(t.length>>>2);let s=1,e=0;for(let h=0;h<t.length;h++){const r=t.charCodeAt(h);r>47&&r<58?s=s<<4|r-48:r>64&&r<71?s=s<<4|r-55:r>96&&r<103&&(s=s<<4|r-87),65536&s&&(i[e++]=s,s=1)}return i.slice(0,e)};const t="0123456789abcdef";Number.prototype.toHex=function(){return t[this>>>28]+t[this>>24&15]+t[this>>20&15]+t[this>>16&15]+t[this>>12&15]+t[this>>8&15]+t[this>>4&15]+t[15&this]},Number.formatData=t=>t<512?t.toFixed(0)+"B":t<524288?(t/1024).toFixed(1)+"KiB":t<536870912?(t/1048576).toFixed(1)+"MiB":t<549755813888?(t/1073741824).toFixed(1)+"GiB":(t/1099511627776).toFixed(1)+"TiB",Date.safestamp=(t=new Date)=>`${t.getYear()+1900}-${("0"+t.getMonth()).slice(-2)}-${("0"+t.getDate()).slice(-2)}-at-${("0"+t.getHours()).slice(-2)}-${("0"+t.getMinutes()).slice(-2)}-${("0"+t.getSeconds()).slice(-2)}`,Math.randint??=()=>4294967296*Math.random()|0;const i=document.createElement("a");globalThis.download=(t,s=t.name??("@"==t.type[0]?"file":t.type.split("/",1)[0]))=>{i.href=URL.createObjectURL(t),i.download=s,i.click(),URL.revokeObjectURL(i.href)},globalThis.loader=({url:t})=>(t=t.slice(0,t.lastIndexOf("/")+1),(...i)=>{if(i[0].raw){const s=[i[0][0]];for(let t=1;t<=i.length;t++)s.push(i[t],i[0][t]);const e=s.join("");return"/"==e[0]?e:t+e}return 1==i.length?"/"==i[0][0]?i[0]:t+i[0]:i.map(i=>"/"==i[0]?i:t+i)}),Array.map??=(t=0,i)=>{const s=[];for(let e=0;e<t;e++)s.push(i(e));return s},Gamma.utils=t=>{t.screenshot=(i="image/png",s)=>new Promise(e=>requestAnimationFrame(()=>t.canvas.toBlob(e,i,s)));class i{x=0;y=0;sensitivity=.5;constructor(t,i,s){this.contents=t,this.width=i,this.height=s}scrollBarX=e;scrollBarY=e;get scrollbar(){return this.scrollBarY}set scrollbar(t){this.scrollBarX=this.scrollBarY=t}consumeInputs(t){const{x:i,y:s}=t.fromDelta(scrollDelta),e=this.sensitivity;scrollDelta.x=scrollDelta.y=0;const h=this.contents.width,r=this.contents.height;this.x=this.width>0?max(0,min(this.x+i*e,h-this.width)):min(0,max(this.x+i*e,-h-this.width)),this.y=this.height>0?max(0,min(this.y+s*e,r-this.height)):min(0,max(this.y+s*e,-r-this.height)),rawWheel.x=rawWheel.y=0;const n=this.contents;n&&((t=t.sub()).translate((n.xOffset??0)-this.x,(n.yOffset??0)-this.y),n.consumeInputs?.(t))}draw(t,...i){const s=this.contents;if(!s?.draw)return;const e=t.mask,h=t.sub();if(h.mask=128,h.drawRect(0,0,this.width,this.height),h.mask=15&e|16,h.translate((s.xOffset??0)-this.x,(s.yOffset??0)-this.y),this.contents.draw(h,...i),t.clearStencil(),this.scrollBarX&&this.height){const i=t.sub();i.translate(0,this.height),this.height>0&&i.scale(1,-1);const e=abs(this.width),h=e/s.width;h<1&&this.scrollBarX(i,abs(this.x)*h,e*h)}if(this.scrollBarY&&this.width){const i=t.sub();i.translate(this.width,0),i.multiply(0,1),this.width>0&&i.scale(1,-1);const e=abs(this.height),h=e/s.height;h<1&&this.scrollBarY(i,abs(this.y)*h,e*h)}}}t.Scrollable=(t,s=1,e=-1)=>new i(t,+s,+e);const s=t.vec4(.2),e=t.Scrollable.defaultScrollbar=(t,i,e)=>{t.shader=null,t.drawRect(i,0,e,.1,s)};t.decoder=new TextDecoder,t.encoder=new TextEncoder,globalThis.TypedArray??=Object.getPrototypeOf(Uint8Array),t.BufReader=class t extends DataView{constructor(t){t instanceof ArrayBuffer?super(t):super(t.buffer,t.byteOffset,t.byteLength),this.i=this.bitState=0}decode(t,i){return t.decode(this,i)}b1(){let t=this.bitState;if(t<2)try{t=256|this.getUint8(this.i++)}catch{t=256}return this.bitState=t>>1,1&t}b2(){let t=this.bitState;if(t<4)try{t=t&(t=+(t<2))|(256|this.getUint8(this.i++))<<t}catch{t=256<<t}return this.bitState=t>>2,3&t}b4(){let t=this.bitState;if(t<16){let i=-21936>>(t<<1)&3;try{t=t&7>>3-i|(256|this.getUint8(this.i++))<<i}catch{t=256<<i}}return this.bitState=t>>4,15&t}u8(){try{return this.getUint8(this.i++)}catch{return 0}}i8(){try{return this.getInt8(this.i++)}catch{return 0}}u16(){try{return this.getUint16((this.i+=2)-2)}catch{return 0}}i16(){try{return this.getInt16((this.i+=2)-2)}catch{return 0}}u24(){try{return this.getUint8(this.i)<<16|this.getUint16((this.i+=3)-2)}catch{return 0}}i24(){try{return this.getInt8(this.i)<<16|this.getUint16((this.i+=3)-2)}catch{return 0}}u32(){try{return this.getUint32((this.i+=4)-4)}catch{return 0}}i32(){try{return this.getInt32((this.i+=4)-4)}catch{return 0}}u48(){try{return 4294967296*this.getUint16((this.i+=6)-6)+this.getUint32(this.i-4)}catch{return 0}}i48(){try{return 4294967296*this.getInt16((this.i+=6)-6)+this.getUint32(this.i-4)}catch{return 0}}u64(){try{return 4294967296*this.getUint32((this.i+=8)-8)+this.getUint32(this.i-4)}catch{return 0}}i64(){try{return 4294967296*this.getInt32((this.i+=8)-8)+this.getUint32(this.i-4)}catch{return 0}}bu64(){try{return this.getBigUint64((this.i+=8)-8)}catch{return 0}}bi64(){try{return this.getBigInt64((this.i+=8)-8)}catch{return 0}}f32(){try{return this.getFloat32((this.i+=4)-4)}catch{return 0}}f64(){try{return this.getFloat64((this.i+=8)-8)}catch{return 0}}bool(){try{return 0!=this.getUint8(this.i++)}catch{return 0}}v64(){try{const t=this.getUint8(this.i++);return t<64?t:t>=128?4294967296*(2147483647&this.getUint32((this.i+=7)-8))+this.getUint32(this.i-4):t>=96?536870911&this.getUint32((this.i+=3)-4):this.getUint8(this.i++)|t<<8&8191}catch{return 0}}bv64(){try{let t=this.getUint8(this.i++);if(t>=64){if(t>=128)return 0x7FFFFFFFFFFFFFFFn&this.getBigUint64((this.i+=7)-8);t=t>=96?536870911&this.getUint32((this.i+=3)-4):this.getUint8(this.i++)|t<<8&8191}return BigInt(t)}catch{return 0}}v32(){try{const t=this.getUint8(this.i++);return t<64?t:t>=128?2147483647&this.getUint32((this.i+=3)-4):this.getUint8(this.i++)|t<<8&16383}catch{return 0}}v16(){try{const t=this.getUint8(this.i++);return t<128?t:this.getUint8(this.i++)|t<<8&16383}catch{return 0}}skip(t){this.i+=t}u8arr(t=-1){try{let i=this.i;return t<0&&(t=this.getUint8(i++))>=64&&(t>=128?(t=2147483647&this.getUint32(i),i+=3):t=this.getUint8(this.i++)|t<<8&16383),this.i=i+t,new Uint8Array(this.buffer.slice(i+=this.byteOffset,t))}catch{return new Uint8Array}}str(){let t=this.i,i=this.getUint8(t++);return i>=64&&(i>=128?(i=2147483647&this.getUint32(t),t+=3):i=this.getUint8(this.i++)|i<<8&16383),this.i=t+i,decoder.decode(new Uint8Array(this.buffer,this.byteOffset+t,i))}enum({intToStr:t,defaultString:i}){let s=this.getUint8(this.i++);return s>64&&(s=s>=128?2147483647&this.getUint32((this.i+=3)-4):this.getUint8(this.i++)|s<<8&16383),t[s]??i}view(t=0){return new Uint8Array(this.buffer,this.byteOffset+(this.i+=t)-t,t)}get read(){return this.i}get remaining(){return this.byteLength-this.i}get overran(){return this.i>this.byteLength}toUint8Array(){return new Uint8Array(this.buffer,this.byteOffset+this.i,this.byteLength-this.i)}copyReadToArrayBuffer(){return this.buffer.slice(this.byteOffset,this.byteOffset+this.i)}copyRemainingToArrayBuffer(){return this.buffer.slice(this.byteOffset+this.i,this.byteOffset+this.byteLength)}copyToWriter(){return new BufWriter(this.buffer.slice(this.byteOffset,this.byteOffset+this.i),this.i)}copy(){return new t(this.buffer.slice(this.byteOffset+this.i,this.byteOffset+this.byteLength))}[Symbol.for("nodejs.util.inspect.custom")](){let t=`BufReader(${this.byteLength-this.i}) [ [33m`,{i:i}=this;const s=i+50>this.byteLength?this.byteLength:i+50;for(;i<s;){const s=this.getUint8(i++);t+="0123456789abcdef"[s>>4]+"0123456789abcdef"[15&s]+" "}return t+`[m${this.byteLength>s?"... ":""}]`}};const{floor:h,trunc:r,fround:n}=Math,u="transfer"in ArrayBuffer.prototype?(t,i=0)=>{t.buf8=new Uint8Array((t.buf=new DataView(t.buf.buffer.transfer(t.cap=(t.cap<<1)+i))).buffer)}:(t,i=0)=>{const s=new Uint8Array(new ArrayBuffer(t.cap=(t.cap<<1)+i));s.set(t.buf8,0),t.buf=new DataView(s.buffer),t.buf8=s};t.BufWriter=class t{constructor(t=new ArrayBuffer(64),i=0){this.buf=new DataView(t),this.buf8=new Uint8Array(t),this.i=i<=(this.cap=t.byteLength)?i:this.cap,this.bitState=0}encode(t,i){return t.encode(this,i)}b1(t=0){let i=this.bitState;7&i||(this.i>=this.cap&&u(this),i=this.i<<3,this.buf8[this.i++]=0),this.buf8[i>>>3]|=t<<(7&i),this.bitState=i+1}b2(t=0){let i=this.bitState,s=7&i;if(s){if(this.buf8[i>>>3]|=t<<s,s<7)return void(this.bitState=i+2);i=s=1}else i=2;this.i>=this.cap&&u(this),this.bitState=i|this.i<<3,this.buf8[this.i++]=t>>s}b4(t=0){let i=this.bitState,s=7&i;if(s){if(this.buf8[i>>>3]|=t<<s,s<5)return void(this.bitState=i+4);i=s-4,s=8-s}else i=4;this.i>=this.cap&&u(this),this.bitState=i|this.i<<3,this.buf8[this.i++]=t>>s}u8(t=0){this.i>=this.cap&&u(this),this.buf8[this.i++]=t}i8(t=0){this.i>=this.cap&&u(this),this.buf8[this.i++]=t}u16(t=0){(this.i+=2)>this.cap&&u(this),this.buf8[this.i-2]=t>>8,this.buf8[this.i-1]=t}i16(t=0){(this.i+=2)>this.cap&&u(this),this.buf8[this.i-2]=t>>8,this.buf8[this.i-1]=t}u24(t=0){(this.i+=3)>this.cap&&u(this),this.buf8[this.i-3]=t>>16,this.buf8[this.i-2]=t>>8,this.buf8[this.i-1]=t}i24(t=0){(this.i+=3)>this.cap&&u(this),this.buf8[this.i-3]=t>>16,this.buf8[this.i-2]=t>>8,this.buf8[this.i-1]=t}u32(t=0){(this.i+=4)>this.cap&&u(this),this.buf.setUint32(this.i-4,t)}i32(t=0){(this.i+=4)>this.cap&&u(this),this.buf.setInt32(this.i-4,t)}u48(t=0){(this.i+=6)>this.cap&&u(this),this.buf.setUint16(this.i-6,h(r(t)/4294967296)),this.buf.setInt32(this.i-4,0|t)}i48(t=0){(this.i+=6)>this.cap&&u(this),this.buf.setInt16(this.i-6,h(r(t)/4294967296)),this.buf.setInt32(this.i-4,0|t)}u64(t=0){(this.i+=8)>this.cap&&u(this),this.buf.setUint32(this.i-8,h(r(t)/4294967296)),this.buf.setInt32(this.i-4,0|t)}i64(t=0){(this.i+=8)>this.cap&&u(this),this.buf.setInt32(this.i-8,h(r(t)/4294967296)),this.buf.setInt32(this.i-4,0|t)}bu64(t=0n){(this.i+=8)>this.cap&&u(this),this.buf.setBigUint64(this.i-8,t)}bi64(t=0n){(this.i+=8)>this.cap&&u(this),this.buf.setBigInt64(this.i-8,t)}f32(t=0){(this.i+=4)>this.cap&&u(this),this.buf.setFloat32(this.i-4,t)}f64(t=0){(this.i+=8)>this.cap&&u(this),this.buf.setFloat64(this.i-8,t)}bool(t=!1){this.i>=this.cap&&u(this),this.buf8[this.i++]=t}v64(t=0){this.i>this.cap-8&&u(this),t>63?t>536870911?(this.buf.setUint32((this.i+=8)-8,2147483648|h(r(t)/4294967296)),this.buf.setInt32(this.i-4,0|t)):t>8191?this.buf.setInt32((this.i+=4)-4,1610612736|t):(this.buf8[this.i++]=t>>8|64,this.buf8[this.i++]=t):this.buf8[this.i++]=t<0?0:t}bv64(t=0n){this.i>this.cap-8&&u(this);const i=Number(t);i>63?i>536870911?this.buf.setBigUint64((this.i+=8)-8,0x8000000000000000n|t):i>0x1FFFn?this.buf.setInt32((this.i+=4)-4,1610612736|i):(this.buf8[this.i++]=i>>8|64,this.buf8[this.i++]=i):this.buf8[this.i++]=i<0?0:i}v32(t=0){this.i>this.cap-4&&u(this),t>63?t>16383?this.buf.setInt32((this.i+=4)-4,2147483648|t):(this.buf8[this.i++]=t>>8|64,this.buf8[this.i++]=t):this.buf8[this.i++]=t<0?0:t}v16(t=0){this.i>this.cap-2&&u(this),t>127?(this.buf8[this.i++]=t>>8|128,this.buf8[this.i++]=t):this.buf8[this.i++]=t>=0?t:0}u8arr(i,s=-1){if(!(i instanceof Uint8Array)){if(!(i instanceof t))return this.i>=this.cap&&u(this),void(this.buf8[this.i++]=0);i=i.buf8.subarray(0,i.i)}if(s<0){if((s=i.byteLength)>2147483647)return this.i>=this.cap&&u(this),void(this.buf8[this.i++]=0);this.i>this.cap-4-s&&u(this,s),s>16383?s>2147483647?this.buf8[this.i++]=s=0:this.buf.setInt32((this.i+=4)-4,2147483648|s):s>63?(this.buf8[this.i++]=s>>8|64,this.buf8[this.i++]=s):this.buf8[this.i++]=s}else this.i>this.cap-s&&u(this,s);this.buf8.set(i,this.i),this.i+=s}skip(t=0){(this.i+=t)>this.cap&&u(this,t)}str(t=""){this.i>this.cap-4&&u(this);const i=encoder.encode(t);let s=i.length;if(s>2147483647)return this.i>=this.cap&&u(this),void(this.buf8[this.i++]=0);this.i>this.cap-4-s&&u(this,s),s>16383?s>2147483647?this.buf8[this.i++]=s=0:this.buf.setInt32((this.i+=4)-4,2147483648|s):s>63?(this.buf8[this.i++]=s>>8|64,this.buf8[this.i++]=s):this.buf8[this.i++]=s,new Uint8Array(this.buffer).set(i,this.i),this.i+=s}enum({strToInt:t,default:i},s){this.i>this.cap-4&&u(this);const e=t.get(s)??i;e>63?e>16383?this.buf.setInt32((this.i+=4)-4,2147483648|e):(this.buf8[this.i++]=e>>8|64,this.buf8[this.i++]=e):this.buf8[this.i++]=e<0?0:e}get written(){return this.i}get buffer(){return this.buf.buffer}get byteOffset(){return 0}get byteLength(){return this.i}toUint8Array(){return this.buf8.subarray(0,this.i)}toReader(){return new BufReader(this)}copyToArrayBuffer(){return this.buf8.buffer.slice(0,this.i)}copy(){return new t(this.buf.buffer.slice(0,this.i),this.i)}copyToReader(){return new BufReader(this.buf8.buffer.slice(0,this.i))}[Symbol.for("nodejs.util.inspect.custom")](){let{i:t}=this,i=`BufWriter(${t}) [ ${t>50?(t-=50,"... "):(t=0,"")}[33m`;for(;t<this.i;){const s=this.buf8[t++];i+="0123456789abcdef"[s>>4]+"0123456789abcdef"[15&s]+" "}return i+"[m]"}};let f=(t,i,s,e)=>(t.encode=i,t.decode=s,t.size=e,t);t.b1=f((t=0)=>+!!t,(t,i)=>t.b1(i),(t,i)=>t.b1(),0),t.b2=f((t=0)=>3&("number"==typeof t?t:Number(t)),(t,i)=>t.b2(i),(t,i)=>t.b2(),0),t.b4=f((t=0)=>15&("number"==typeof t?t:Number(t)),(t,i)=>t.b4(i),(t,i)=>t.b4(),0),t.u8=f((t=0)=>255&("number"==typeof t?t:Number(t)),(t,i)=>t.u8(i),(t,i)=>t.u8(),1),t.i8=f((t=0)=>("number"==typeof t?t:Number(t))<<24>>24,(t,i)=>t.i8(i),(t,i)=>t.i8(),1),t.u16=f((t=0)=>65535&("number"==typeof t?t:Number(t)),(t,i)=>t.u16(i),(t,i)=>t.u16(),2),t.i16=f((t=0)=>("number"==typeof t?t:Number(t))<<16>>16,(t,i)=>t.i16(i),(t,i)=>t.i16(),2),t.u24=f((t=0)=>16777215&("number"==typeof t?t:Number(t)),(t,i)=>t.u24(i),(t,i)=>t.u24(),3),t.i24=f((t=0)=>("number"==typeof t?t:Number(t))<<8>>8,(t,i)=>t.i24(i),(t,i)=>t.i24(),3),t.u32=f((t=0)=>("number"==typeof t?t:Number(t))>>>0,(t,i)=>t.u32(i),(t,i)=>t.u32(),4),t.i32=f((t=0)=>0|("number"==typeof t?t:Number(t)),(t,i)=>t.i32(i),(t,i)=>t.i32(),4),t.u48=f((t=0)=>4294967296*(65535&h(r(t="number"==typeof t?t:Number(t))/4294967296))+(t>>>0),(t,i)=>t.u48(i),(t,i)=>t.u48(),6),t.i48=f((t=0)=>4294967296*(h(r(t="number"==typeof t?t:Number(t))/4294967296)<<16>>16)+(t>>>0),(t,i)=>t.i48(i),(t,i)=>t.i48(),6),t.u64=f((t=0)=>4294967296*(h(r(t="number"==typeof t?t:Number(t))/4294967296)>>>0)+(t>>>0),(t,i)=>t.u64(i),(t,i)=>t.u64(),8),t.i64=f((t=0)=>4294967296*(0|h(r(t="number"==typeof t?t:Number(t))/4294967296))+(t>>>0),(t,i)=>t.i64(i),(t,i)=>t.i64(),8),t.bu64=f((t=0n)=>0xFFFFFFFFFFFFFFFFn&("bigint"==typeof t?t:BigInt(t)),(t,i)=>t.bu64(i),(t,i)=>t.bu64(),8),t.bi64=f((t=0n)=>BigInt.asIntN(64,"bigint"==typeof t?t:BigInt(t)),(t,i)=>t.bi64(i),(t,i)=>t.bi64(),8),t.f32=f((t=0)=>n("number"==typeof t?t:Number(t)),(t,i)=>t.f32(i),(t,i)=>t.f32(),4),t.f64=f((t=0)=>"number"==typeof t?t:Number(t),(t,i)=>t.f64(i),(t,i)=>t.f64(),8),t.v16=f((t=0)=>(t="number"==typeof t?t:Number(t))<0?0:32767&t,(t,i)=>t.v16(i),(t,i)=>t.v16(),1),t.v32=f((t=0)=>(t="number"==typeof t?t:Number(t))<0?0:2147483647&t,(t,i)=>t.v32(i),(t,i)=>t.v32(),1),t.v64=f((t=0)=>("number"==typeof t?t:Number(t))<0?0:t%0x8000000000000000,(t,i)=>t.v32(i),(t,i)=>t.v32(),1),t.bv64=f((t=0n)=>("bigint"==typeof t?t:BigInt(t))<0n?0n:0x7FFFFFFFFFFFFFFFn&t,(t,i)=>t.v32(i),(t,i)=>t.v32(),1),t.u8arr=f(t=>{try{const i="string"==typeof t?encoder.encode(t):new Uint8Array(t.buffer?t.buffer.slice(t.byteOffset,t.byteLength):t instanceof ArrayBuffer?t.slice(0,2147483647):t);return i.byteLength>2147483647?i.subarray(0,2147483647):i}catch{return new Uint8Array}},(t,i)=>t.u8arr(i),(t,i)=>t.u8arr(),1),u8arr.len=t=>((t=h(t))>=0||(t=0),f(i=>i instanceof ArrayBuffer?new Uint8Array(i.byteLength>=t?i.slice(0,t):t):new Uint8Array(i?.length===t?i:t),(i,s)=>i.u8arr(s,t),(i,s)=>i.u8arr(t),t)),t.str=f((t="")=>t+"",(t,i)=>t.str(i),(t,i)=>t.str(),1),t.bool=f(t=>!!t,(t,i)=>t.bool(i),(t,i)=>t.bool(),1),t.Struct=(t,i)=>{const s=[],e=[],h=[],r=[],n=[];let u=0,f=0;const a={};for(const i in t){let c=/^[a-zA-Z$_][a-zA-Z0-9$_]*$/.test(i)?i:JSON.stringify(i);s.push(c+":a"+u),e.push(c+":this.a"+u+"(a"+u+")"),h.push("this.a"+u+".encode(b,a"+u+")"),n.push(c+":this.a"+u+".decode(b)"),c=c.length==i.length?"v."+c:"v["+c+"]",r.push(c+"=this.a"+u+".decode(b,"+c+")"),f+=(a["a"+u++]=t[i]).size??0}const c=`return{${e}}`;return i??=new Function(`{${s}}={}`,c).bind(a),i.encode=new Function(`b,{${s}}={}`,h.join(";")).bind(a),i.decode=new Function("b,v",`if(!v)return {${n}};${r.join(";")};return v`).bind(a),i.size=f,i.of=new Function(Object.keys(a),c).bind(a),i},t.Arr=(t,i=-1)=>{(i=h(i))>=0||(i=-1);const s=f(s=>{const e=[];try{for(const i of s)e.push(t(i))}catch{}if(i>=0)if(e.length>i)e.length=i;else for(;e.length<i;)e.push(t());else e.length>2147483647&&(e.length=2147483647);return e},(s,e=[])=>{const h=i<0?(s.v32(e.length),e.length):i;for(let i=0;i<h;i++)t.encode(s,e[i])},(s,e)=>{const h=i<0?s.v32():i;if(e)for(let i=0;i<h;i++)e[i]=t.decode(s,e[i]);else{e=[];for(let i=h;--i>=0;)e.push(t.decode(s))}return e},i<0?1:(t.size??0)*i);return s.of=(...t)=>s(t),s},t.Optional=t=>f(i=>null==i?null:t(i),(i,s)=>{null==s?i.u8(0):(i.u8(1),t.encode(i,s))},(i,s)=>i.u8()?t.decode(i,s):null,1),t.Enum=(t=[],i=void 0)=>{const s=new Map,e=[];if(Array.isArray(t))for(let i=0;i<t.length;i++)s.set(t[i]+"",i),e[i]=t[i];else for(const i in t){const h=2147483647&t[i];s.set(i,h),e[h]=i}"string"!=typeof i&&(i=s.keys().next().value??"");let h=-1;for(;e[++h];);const r=f(t=>"string"==typeof t?s.get(t)??h:2147483647&Number(t),(t,i)=>t.v32("string"==typeof i?s.get(i)??h:i),(t,s)=>e[t.v32()]??i,1);return r.strToInt=s,r.intToStr=e,r.default=h,r.defaultString=i,r},t.Padding=(t=0)=>f(()=>{},(i,s)=>i.skip(t),(i,s)=>{i.i+=t},t)}}