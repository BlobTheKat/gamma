{Object.defineProperties(Array.prototype,{best:{enumerable:!1,value(t,e=-1/0){let s;const i=this.length;for(let r=0;r<i;r++){const i=this[r],h=t(i,r,this);h>=e&&(e=h,s=i)}return s}},mmap:{enumerable:!1,value(t){const e=this.length;for(let s=0;s<e;s++)this[s]=t(this[s]);return this}},bind:{enumerable:!1,value(t,e=-1){if((e>>>=0)>=this.length)return this.push(t);let s;for(;e<this.length;)s=this[e],this[e++]=t,t=s;return this.push(s)}},fire:{enumerable:!1,value(...t){for(const e of this)try{e(...t)}catch(t){Promise.reject(t)}}},mapFire:{enumerable:!1,value(...t){const e=[];for(const s of this)try{e.push(s(...t))}catch(t){Promise.reject(t),e.push(void 0)}return e}}}),Uint8Array.fromHex=function(t){const e=new Uint8Array(t.length>>>1);let s=1,i=0;for(let r=0;r<t.length;r++){const h=t.charCodeAt(r);h>47&&h<58?s=s<<4|h-48:h>64&&h<71?s=s<<4|h-55:h>96&&h<103&&(s=s<<4|h-87),256&s&&(e[i++]=s,s=1)}return e.slice(0,i)},Uint16Array.fromHex=function(t){const e=new Uint16Array(t.length>>>2);let s=1,i=0;for(let r=0;r<t.length;r++){const h=t.charCodeAt(r);h>47&&h<58?s=s<<4|h-48:h>64&&h<71?s=s<<4|h-55:h>96&&h<103&&(s=s<<4|h-87),65536&s&&(e[i++]=s,s=1)}return e.slice(0,i)};const t="0123456789abcdef";Number.prototype.toHex=function(){return t[this>>>28]+t[this>>24&15]+t[this>>20&15]+t[this>>16&15]+t[this>>12&15]+t[this>>8&15]+t[this>>4&15]+t[15&this]},Number.formatData=t=>t<512?t.toFixed(0)+"B":t<524288?(t/1024).toFixed(1)+"KiB":t<536870912?(t/1048576).toFixed(1)+"MiB":t<549755813888?(t/1073741824).toFixed(1)+"GiB":(t/1099511627776).toFixed(1)+"TiB",Date.safestamp=(t=new Date)=>`${t.getYear()+1900}-${("0"+t.getMonth()).slice(-2)}-${("0"+t.getDate()).slice(-2)}-at-${("0"+t.getHours()).slice(-2)}-${("0"+t.getMinutes()).slice(-2)}-${("0"+t.getSeconds()).slice(-2)}`,Math.randint??=()=>4294967296*Math.random()|0;const e=document.createElement("a");globalThis.download=(t,s=t.name??("@"==t.type[0]?"file":t.type.split("/",1)[0]))=>{e.href=URL.createObjectURL(t),e.download=s,e.click(),URL.revokeObjectURL(e.href)},globalThis.loader=({url:t})=>(t=t.slice(0,t.lastIndexOf("/")+1),(...e)=>{if(e[0].raw){const s=[e[0][0]];for(let t=1;t<=e.length;t++)s.push(e[t],e[0][t]);const i=s.join("");return"/"==i[0]?i:t+i}return 1==e.length?"/"==e[0][0]?e[0]:t+e[0]:e.map(e=>"/"==e[0]?e:t+e)}),Array.map??=(t=0,e)=>{const s=[];for(let i=0;i<t;i++)s.push(e(i));return s},Gamma.utils=t=>{t.screenshot=(e="image/png",s)=>new Promise(i=>requestAnimationFrame(()=>t.canvas.toBlob(i,e,s)));class e{x=0;y=0;sensitivity=.5;constructor(t,e,s){this.contents=t,this.width=e,this.height=s}scrollBarX=i;scrollBarY=i;get scrollbar(){return this.scrollBarY}set scrollbar(t){this.scrollBarX=this.scrollBarY=t}consumeInputs(t){const{x:e,y:s}=t.fromDelta(scrollDelta),i=this.sensitivity;scrollDelta.x=scrollDelta.y=0;const r=this.contents.width,h=this.contents.height;this.x=this.width>0?max(0,min(this.x+e*i,r-this.width)):min(0,max(this.x+e*i,-r-this.width)),this.y=this.height>0?max(0,min(this.y+s*i,h-this.height)):min(0,max(this.y+s*i,-h-this.height)),rawWheel.x=rawWheel.y=0;const n=this.contents;n&&((t=t.sub()).translate((n.xOffset??0)-this.x,(n.yOffset??0)-this.y),n.consumeInputs?.(t))}draw(t,...e){const s=this.contents;if(!s?.draw)return;const i=t.mask,r=t.sub();if(r.mask=128,r.drawRect(0,0,this.width,this.height),r.mask=15&i|16,r.translate((s.xOffset??0)-this.x,(s.yOffset??0)-this.y),this.contents.draw(r,...e),t.clearStencil(),this.scrollBarX&&this.height){const e=t.sub();e.translate(0,this.height),this.height>0&&e.scale(1,-1);const i=abs(this.width),r=i/s.width;r<1&&this.scrollBarX(e,abs(this.x)*r,i*r)}if(this.scrollBarY&&this.width){const e=t.sub();e.translate(this.width,0),e.multiply(0,1),this.width>0&&e.scale(1,-1);const i=abs(this.height),r=i/s.height;r<1&&this.scrollBarY(e,abs(this.y)*r,i*r)}}}t.Scrollable=(t,s=1,i=-1)=>new e(t,+s,+i);const s=t.vec4(.2),i=t.Scrollable.defaultScrollbar=(t,e,i)=>{t.shader=null,t.drawRect(e,0,i,.1,s)}}}